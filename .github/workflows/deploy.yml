- name: Deploy to DigitalOcean via rsync
  uses: appleboy/ssh-action@v0.1.2
  with:
    host: ${{ secrets.DIGITALOCEAN_HOST }}
    username: ${{ secrets.DIGITALOCEAN_USERNAME }}
    key: ${{ secrets.SSH_PRIVATE_KEY }}
    script: |
      set -x  # Enable command tracing

      # Clean existing theme files
      echo "Cleaning existing theme files..."
      rm -rf /var/www/html/wp-content/themes/betseige

      # Create target directory if it doesn't exist
      echo "Creating target directory..."
      mkdir -p /var/www/html/wp-content/themes/betseige

      # Copy new theme files using rsync
      echo "Copying new theme files..."
      rsync -avz --exclude='.git' --exclude='node_modules' dist/ /var/www/html/wp-content/themes/betseige

      # Print confirmation
      echo "New theme files deployed."
